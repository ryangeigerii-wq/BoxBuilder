<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Box Builder (LemonadeJS)</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="/static/css/style.css?v={{ cache_bust }}" />
  <style>
    /* Page specific extras */
    .builder-layout { max-width:1180px; margin:0 auto; padding:2rem; display:grid; gap:2rem; grid-template-columns: minmax(340px,400px) 1fr; }
    @media (max-width: 1000px){ .builder-layout { grid-template-columns:1fr; padding:1.25rem; } }
    .panel { background:var(--panel); border:1px solid var(--border); border-radius:var(--radius); padding:1.5rem 1.6rem 1.75rem; box-shadow:var(--shadow); position:relative; }
    .panel h2 { margin:0 0 1rem; font-size:1.1rem; }
    form.box-lm-form { display:grid; gap:1.1rem; }
    .triple { display:grid; gap:.75rem; grid-template-columns:repeat(auto-fit,minmax(95px,1fr)); }
    label span.lbl { font-size:.65rem; letter-spacing:.5px; font-weight:600; text-transform:uppercase; color:var(--text-dim); }
    input[type=number] { background:var(--panel-alt); color:var(--text); border:1px solid var(--border); padding:.6rem .65rem; border-radius:var(--radius-sm); font-size:.85rem; }
    input[type=number]:focus { outline:2px solid var(--accent); border-color:var(--accent); }
    .metrics { font-size:.75rem; color:var(--text-dim); line-height:1.4; display:grid; gap:.25rem; }
    .metrics strong { color:var(--text); }
    .preview-wrapper { display:flex; justify-content:center; align-items:center; min-height:440px; }
    svg { max-width:100%; height:auto; background:#0d0f12; border:1px solid var(--border); border-radius:var(--radius-sm); }
    .buttons-row { display:flex; flex-wrap:wrap; gap:.75rem; margin-top:.5rem; }
    button.action { background:var(--panel-alt); color:var(--text); border:1px solid var(--border); padding:.6rem 1rem; border-radius:var(--radius-sm); cursor:pointer; font-size:.75rem; font-weight:600; letter-spacing:.5px; }
    button.action.primary { background:linear-gradient(135deg,var(--accent),#ff9d4f); color:#fff; }
    button.action:hover { filter:brightness(1.08); }
    .footer-note { margin-top:1.25rem; font-size:.6rem; color:var(--text-dim); text-align:center; }
    .fade-enter { opacity:0; transform:scale(.97); }
    .fade-enter-active { opacity:1; transform:scale(1); transition:250ms ease; }
  </style>
</head>
<body>
  <header class="site-header builder-header" style="padding:1.4rem 2rem 0.5rem;">
    <a href="/" class="back-link">‚Üê Home</a>
    <div class="logo-block builder-compact" style="margin-bottom:.5rem;">
      <img src="/static/img/logo.png?v={{ cache_bust }}" alt="Logo" class="logo" />
      <h1 style="margin:.5rem 0 0;">Lemonade Box Builder</h1>
      <p class="tagline" style="margin-top:.25rem;">Reactive dimensions, net volume, downloadable SVG.</p>
    </div>
  </header>
  <main class="builder-layout" id="lm-root"></main>
  <!-- Static fallback / SEO & enables tests to assert presence without JS execution -->
  <noscript>
    <div class="panel" style="margin:1rem;">
      <h2>Lemonade Box Builder (Static Fallback)</h2>
      <p>Enable JavaScript to use the reactive box builder with live preview.</p>
      <p>Features: Reactive dimensions, net volume, downloadable SVG.</p>
      <p><strong>Download SVG</strong> feature requires JavaScript.</p>
      <p class="footer-note">Net volume subtracts driver and bracing displacement from gross internal volume.</p>
    </div>
  </noscript>
  <script src="https://cdn.jsdelivr.net/npm/lemonadejs/dist/lemonade.min.js"></script>
  {# Deprecated legacy template kept temporarily for reference; will be removed after confirming new builder script stability. #}
  <script src="/static/js/box_builder.js?v={{ cache_bust }}" defer></script>
</body>
</html>